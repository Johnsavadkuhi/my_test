<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Mining Simulation</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #f7931a;
            text-align: center;
        }
        
        .explanation {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .mining-area {
            border: 2px solid #f7931a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            background-color: #f9f9f9;
        }
        
        .block {
            background-color: #f7931a;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .block-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .block-number {
            font-weight: bold;
        }
        
        .hash {
            font-family: monospace;
            background-color: #333;
            color: #fff;
            padding: 5px;
            border-radius: 4px;
            word-break: break-all;
            margin: 10px 0;
        }
        
        .nonce {
            font-weight: bold;
            color: #f7931a;
        }
        
        .miners {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .miner {
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            background-color: #e9e9e9;
            width: 120px;
        }
        
        .miner.active {
            background-color: #f7931a;
            color: white;
        }
        
        .miner .hash-rate {
            font-size: 12px;
            margin-top: 5px;
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #f7931a;
            width: 0%;
            transition: width 0.5s;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            background-color: #f7931a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #e08218;
        }
        
        .reward {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
            color: #f7931a;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .reward.show {
            opacity: 1;
        }
        
        .transaction {
            background-color: #e9e9e9;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bitcoin Mining Simulation</h1>
        
        <div class="explanation">
            <p>Bitcoin mining is like a giant puzzle competition where computers around the world compete to solve a difficult math problem. The first one to solve it gets to add a new block to the blockchain and receives a reward in Bitcoin.</p>
            <p>In this simulation, we'll show how miners try different numbers (called "nonces") to find a hash that starts with a certain number of zeros.</p>
        </div>
        
        <div class="mining-area">
            <div class="block">
                <div class="block-header">
                    <span class="block-number">Block #812345</span>
                    <span>Target: Hash starting with 0000...</span>
                </div>
                <div class="hash" id="current-hash">0000000000000000000000000000000000000000000000000000000000000000</div>
                <div>Trying nonce: <span class="nonce" id="current-nonce">0</span></div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="mining-progress"></div>
                    </div>
                </div>
            </div>
            
            <div class="miners" id="miners-container">
                <!-- Miners will be added here by JavaScript -->
            </div>
            
            <div class="reward" id="reward-message">Miner #3 found the solution! Reward: 6.25 BTC</div>
        </div>
        
        <div class="controls">
            <button id="start-btn">Start Mining</button>
            <button id="reset-btn">Reset</button>
        </div>
        
        <div class="explanation">
            <h3>How It Works:</h3>
            <ul>
                <li>Miners collect transactions and try to add them to a new block</li>
                <li>They change a number called "nonce" and calculate the hash of the block</li>
                <li>The hash must be lower than a target value (start with many zeros)</li>
                <li>This is like trying to guess a combination lock - it takes many attempts!</li>
                <li>The first miner to find a valid hash gets to add the block and receives Bitcoin as a reward</li>
                <li>This process happens approximately every 10 minutes</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const startBtn = document.getElementById('start-btn');
            const resetBtn = document.getElementById('reset-btn');
            const currentHash = document.getElementById('current-hash');
            const currentNonce = document.getElementById('current-nonce');
            const miningProgress = document.getElementById('mining-progress');
            const minersContainer = document.getElementById('miners-container');
            const rewardMessage = document.getElementById('reward-message');
            
            let miningInterval;
            let isMining = false;
            let nonce = 0;
            let progress = 0;
            let miners = [];
            let targetZeros = 4; // How many zeros the hash must start with
            
            // Initialize miners
            function initializeMiners() {
                minersContainer.innerHTML = '';
                miners = [];
                
                for (let i = 0; i < 5; i++) {
                    const miner = document.createElement('div');
                    miner.className = 'miner';
                    miner.innerHTML = `
                        <div>Miner #${i+1}</div>
                        <div class="hash-rate">${Math.floor(Math.random() * 100) + 50} H/s</div>
                    `;
                    minersContainer.appendChild(miner);
                    miners.push({
                        element: miner,
                        hashRate: Math.floor(Math.random() * 100) + 50,
                        isActive: false
                    });
                }
            }
            
            // Generate a random hash (simplified for demonstration)
            function generateHash(nonce) {
                // In real Bitcoin mining, this would be a complex cryptographic function
                // Here we're just creating a simplified version for demonstration
                let hash = '';
                const chars = '0123456789abcdef';
                
                // Start with some zeros based on our target
                for (let i = 0; i < 64; i++) {
                    if (i < targetZeros) {
                        hash += '0';
                    } else {
                        hash += chars.charAt(Math.floor(Math.random() * chars.length));
                    }
                }
                
                return hash;
            }
            
            // Check if a hash meets the target difficulty
            function isValidHash(hash) {
                // In this simulation, we're just checking if the hash starts with enough zeros
                // In real Bitcoin, it's more complex (hash must be less than target value)
                return hash.startsWith('0'.repeat(targetZeros));
            }
            
            // Start the mining process
            function startMining() {
                if (isMining) return;
                
                isMining = true;
                startBtn.disabled = true;
                nonce = 0;
                progress = 0;
                rewardMessage.classList.remove('show');
                
                // Activate all miners
                miners.forEach(miner => {
                    miner.element.classList.add('active');
                    miner.isActive = true;
                });
                
                miningInterval = setInterval(() => {
                    // Update nonce and hash
                    nonce++;
                    currentNonce.textContent = nonce;
                    
                    // Generate a new hash
                    const hash = generateHash(nonce);
                    currentHash.textContent = hash;
                    
                    // Update progress (simulated)
                    progress += 0.5;
                    if (progress > 100) progress = 100;
                    miningProgress.style.width = progress + '%';
                    
                    // Randomly select a "winning" miner
                    if (Math.random() < 0.005 || progress >= 100) {
                        // A miner found the solution!
                        finishMining();
                    }
                }, 100);
            }
            
            // Finish the mining process when a solution is found
            function finishMining() {
                clearInterval(miningInterval);
                isMining = false;
                startBtn.disabled = false;
                
                // Pick a random winner
                const winnerIndex = Math.floor(Math.random() * miners.length);
                
                // Show reward message
                rewardMessage.textContent = `Miner #${winnerIndex+1} found the solution! Reward: 6.25 BTC`;
                rewardMessage.classList.add('show');
                
                // Deactivate all miners except the winner
                miners.forEach((miner, index) => {
                    if (index !== winnerIndex) {
                        miner.element.classList.remove('active');
                        miner.isActive = false;
                    }
                });
            }
            
            // Reset the simulation
            function resetSimulation() {
                clearInterval(miningInterval);
                isMining = false;
                startBtn.disabled = false;
                nonce = 0;
                progress = 0;
                
                currentNonce.textContent = '0';
                currentHash.textContent = '0000000000000000000000000000000000000000000000000000000000000000';
                miningProgress.style.width = '0%';
                rewardMessage.classList.remove('show');
                
                // Deactivate all miners
                miners.forEach(miner => {
                    miner.element.classList.remove('active');
                    miner.isActive = false;
                });
            }
            
            // Event listeners
            startBtn.addEventListener('click', startMining);
            resetBtn.addEventListener('click', resetSimulation);
            
            // Initialize the simulation
            initializeMiners();
        });
    </script>
</body>
</html>